print("arriving at LLL map");

if (music) music.destroy();
var music = playMusic("audio/ambience/cell");
music.name = "music";

START_PASSAGES
---
:LLLmapStart

---
:meetingCart

!`
clear();
execAsset("introCart.phore");
gotoPassage("introModCartStart");
data.metCart = true;
`
---
:backLLL

!`
gotoThirstyCaves();
`
---
:loreWhoring

!`
clear();
execAsset("LLL.phore");
gotoPassage("hubLLL");
`
---
:femmeRens

!`
clear();
execAsset("thelly.phore");
gotoPassage("thellyModStart");
`
---
:bullyingLone

!`
clear();
execAsset("lone.phore");
gotoPassage("loneModStart");
`
---
:loneDoors

!`
clear();
execAsset("loneDoors.phore");
gotoPassage("loneDoorsStart");
`
---
:wetTransmission

!`
clear();
execAsset("LLL.phore");
gotoPassage("trans0");
`
---
:wetCartography

!`
clear();
execAsset("cartPara.phore");
gotoPassage("cartParaModStart");
`

END_PASSAGES

function gotoLLL() {
	clearNodes();

	submitNode("Back", "backLLL");
	submitNode("Meeting Cart", "meetingCart");
	submitNode("Femme Ren's", "femmeRens");
	submitNode("Bullying Lone", "bullyingLone");
	submitNode("Looking for Trouble", "loneDoors");
	submitNode("Lore Whoring", "loreWhoring");
	submitNode("Wet Transmission", "wetTransmission");
	submitNode("Wet Cartography", "wetCartography");

	attachNode("Back", "Meeting Cart", RIGHT);
	attachNode("Meeting Cart", "Femme Ren's", BOTTOM);
	attachNode("Femme Ren's", "Bullying Lone", BOTTOM);
	attachNode("Bullying Lone", "Looking for Trouble", BOTTOM);
	attachNode("Meeting Cart", "Lore Whoring", RIGHT);
	attachNode("Lore Whoring", "Wet Transmission", RIGHT);
	attachNode("Wet Transmission", "Wet Cartography", RIGHT);

	setNodeLocked("Femme Ren's", function() {
		return data.metCart;
	});

	setNodeLocked("Bullying Lone", function() {
		return data.metRen;
	});

	setNodeLocked("Looking for Trouble", function() {
		return data.metLone;
	});

	setNodeLocked("Lore Whoring", function() {
		return data.metCart;
	});

	setNodeLocked("Wet Transmission", function() {
		return data.metCart;
	});

	setNodeLocked("Wet Cartography", function() {
		return data.heardTransmission;
	});

	gotoMap();

	var layerSelect = addImage("writer/mapTitles/gcd.png");
		layerSelect.layer = 39; //Just beneath node lines & boxes
		layerSelect.alpha = 0;
		layerSelect.y = -layerSelect.height;
		tween(layerSelect, 1, {y: 0, alpha: 1}, {ease: QUINT_OUT});

	setBackground(0, "writer/mainBg");

	var backgroundLLL = addImage("writer/gcdBg.png");
	backgroundLLL.y = gameHeight - backgroundLLL.height;
	backgroundLLL.layer = 38; //Below title
	tween(backgroundLLL, 30, {y: 0}, {ease: QUAD_OUT, type: PINGPONG, startDelay: 4});

	if (!data.seenLLLCredit) {
		data.seenLLLCredit = true;
		msg("Art: Cubber");
	}
}

//Taro, Cade, Gryphon, and Kemp's truck cameo
